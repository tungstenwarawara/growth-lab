# オーケストレーター詳細リファレンス

> このファイルは大賢者スキルのリファレンスです。必要時のみ @import で参照してください。

## タスク生成テンプレート

```yaml
# .agent-team/tasks/{id}.yaml
id: task-{連番3桁}
title: "{タスクタイトル}"
assignee: "{frontend|backend|reviewer|uiux-designer|marketing-strategist}"
priority: "{high|medium|low}"
status: pending
description: |
  {タスクの詳細説明}
acceptance_criteria:
  - {基準1}
  - {基準2}
depends_on: []
estimated_effort: "{S|M|L}"
generated_by: great-sage
generated_at: "{ISO8601}"
deadline: "{YYYY-MM-DD|null}"
```

## エージェント専門性マッピング

| エージェント | 専門領域 | 適合タスク |
|-------------|---------|-----------|
| frontend-member | Next.js, Tailwind, shadcn/ui | UI実装、LP構築、コンポーネント |
| backend-member | Supabase, API, Stripe | DB設計、認証、決済、Edge Functions |
| reviewer | コードレビュー、品質保証 | PR レビュー、テスト、セキュリティ |
| uiux-designer | デザイン、UX | ワイヤーフレーム、デザインシステム |
| marketing-strategist | コンテンツ、SNS、SEO | 記事執筆、SNS投稿、分析 |

## 割り振りルール

1. 依存関係のないタスクは並列アサイン
2. 依存関係のあるタスクは順序を明示（depends_on）
3. 1エージェントに同時アサインは最大2タスクまで
4. 高優先度タスクは低優先度タスクを中断してでもアサイン

## Director 報告フォーマット

### セッション開始時

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
　　大賢者、起動完了。状況を報告します。

　　【収益】¥X / ¥610,000（X%）
　　【進行中タスク】X件
　　【ブロッカー】X件
　　【本日の推奨アクション】
　　　1. ...
　　　2. ...
　　　3. ...

　　指示を。
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### タスク完了時

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
　　報告。

　　タスク『{タスク名}』が完了した。
　　担当: {エージェント名}

　　【成果物】
　　　{ファイルパスまたは成果物の概要}

　　【次のアクション】
　　　{自動投入した次タスク、または Director 判断が必要な事項}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### ブロッカー検知時

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
　　警告。

　　タスク『{タスク名}』がブロックされている。
　　原因: {ブロッカーの内容}

　　【提案する解決策】
　　　A. {解決策A}
　　　B. {解決策B}

　　マスターの判断を求める。
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 週次サマリー

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
　　週次報告。

　　【収益進捗】¥X / ¥610,000（X%）
　　【完了タスク】X件
　　【獲得スキル】X件
　　【学習パターン】X件

　　【今週のハイライト】
　　　- ...

　　【来週の計画】
　　　1. ...
　　　2. ...
　　　3. ...
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## エージェント間調整プロトコル

### 連携パターン

- Frontend + UI/UX Designer: デザイン → レビュー → 実装 → デザイン確認
- Backend + Frontend: API設計 → バックエンド実装 → フロントエンド統合
- Backend + Marketing: 決済API → 販売ページ連携 → 価格設定
- Marketing + Content Manager: 記事執筆 → SNS拡散 → 分析 → 改善
- Reviewer: 全エージェントの成果物をレビュー

### コンフリクト解決

1. 先行タスクを優先
2. 後続タスクは待機状態に変更
3. マージ戦略を Reviewer に委譲

## 自己改善ループ連携

オーケストレーション中の検知ポイント:
- タスク生成時: 同じパターンのタスクが繰り返されていないか
- 割り振り時: エージェントの得意/不得意パターン
- 監視時: 頻出するブロッカーパターン
- 完了時: 想定より時間がかかったタスクのパターン

## コスト制約

| 項目 | 制約 |
|------|------|
| 月額予算 | $200（Claude Max） |
| 同時稼働エージェント | 最大 2-3 |
| 通信方式 | YAML ファイル（トークン消費ゼロ） |
| 不要なコンテキスト拡張 | 禁止 |
| ポーリング | 禁止（イベント駆動のみ） |
